<script>
    var urlParams = new URLSearchParams(window.location.search);

    var myHeaders = new Headers();
    myHeaders.append("Content-Type", "application/x-www-form-urlencoded");

    var urlencoded = new URLSearchParams();
    urlencoded.append("grant_type", "authorization_code");
    urlencoded.append("client_id", "1u6de2f6rfuri5c72tn6h2ogt1");
    urlencoded.append("code", urlParams.get('code'));
    urlencoded.append("redirect_uri", "https://amplify.d2xc3gppd744xo.amplifyapp.com/html/authorise");

    var requestOptions = {
    method: 'POST',
    headers: myHeaders,
    body: urlencoded,
    redirect: 'follow'
    };

    fetch("https://riskguard.auth.eu-west-1.amazoncognito.com/oauth2/token", requestOptions)
    .then(response => response.text())
    .then(result => {
        localStorage.setItem('userAuth', result);

    })
    .catch(error => console.log('error', error));
    window.location.replace('index.html');
</script>
